{"version":3,"sources":["panels/Lobby.js","redux/actions/lobby.js","panels/LobbySetting.js","redux/actions/places.js","panels/Home.js","panels/Game.js","panels/Vote.js","panels/Final.js","App.js","redux/reducers/lobby.js","redux/reducers/places.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["Lobby","props","dispatch","useDispatch","places","useSelector","count","lobby","useState","players","setPlayers","useEffect","players_","Array","fill","id","name","role","i","length","left","onClick","go","map","player","top","type","value","onChange","e","index","target","handleChange","style","marginTop","stretched","size","mode","randPlace","Math","floor","random","spyCount","ceil","randSpy","payload","setLobbyPlayers","onClickSubmit","LobbySetting","countPlayers","setCountPlayers","customPlaces","setCustomPlaces","warning","setWarning","display","height","alignItems","justifyContent","background","border","header","paddingLeft","paddingTop","paddingBottom","places_","newPlace","label","push","place","removable","onRemove","placeID","filter","onClickRemovePlace","handleChangePlaceLabel","setPlaces","Home","textAlign","margin","Game","flashlightInterval","timerInterval","history","remaningTime","setRemaningTime","isCounting","setIsCounting","gameMode","setGameMode","showToggle","setShowToggle","pos","currentPlayer","setCurrentPlayer","startGame","startTimer","setInterval","console","log","clearInterval","a","bridge","send","then","data","flashInfo","level","Fragment","flexDirection","width","fontSize","toString","padStart","backgroundImage","borderRadius","gap","nextPlayer","onClickChangePlayer","Vote","selectedPlayer","setSelectedPlayer","playerID","selPlayer","find","onClickSelectPlayer","editLobbyPlayers","currentTarget","dataset","to","Final","spyWin","setSpyWin","in","winStyle","player_","includes","App","scheme","setScheme","activePanel","setActivePanel","fetchedUser","setUser","popout","setPopout","user","subscribe","detail","fetchData","initialState","state","action","Number","rootReducer","combineReducers","lobbyReducer","placesReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.32290eec.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { setLobbyPlayers, setLobbyPlace } from \"../redux/actions/lobby\"\r\n\r\nimport { Panel, PanelHeader, PanelHeaderBack, FormItem, Input, Div, Button } from '@vkontakte/vkui';\r\n\r\nconst Lobby = props => {\r\n\tconst dispatch = useDispatch();\r\n\tconst { places } = useSelector(({ places }) => places);\r\n\tconst { count } = useSelector(({ lobby }) => lobby);\r\n\r\n\tconst [players, setPlayers] = useState([])\r\n\r\n\tconst handleChange = (index, e) => {\r\n\t\tlet players_ = [...players];\r\n\t\tplayers_.map((player) => player.id == index ? player.name = e.target.value : '')\r\n\t\tsetPlayers(players_)\r\n\t}\r\n\r\n\tconst onClickSubmit = (e) => {\r\n\t\tconst players_ = [...players]\r\n\t\tconst randPlace = Math.floor(Math.random() * places.length);\r\n\t\tconst spyCount = Math.ceil(players.length / 8);\r\n\r\n\t\tfor(let i = 0; i < spyCount; ++i) {\r\n\t\t\tlet randSpy = Math.floor(Math.random() * players.length);\r\n\t\t\twhile(players_[randSpy].role === \"spy\") {\r\n\t\t\t\trandSpy = Math.floor(Math.random() * players.length);\r\n\t\t\t}\r\n\t\t\tplayers_[randSpy].role = \"spy\";\r\n\t\t}\r\n\r\n\t\tdispatch(setLobbyPlayers(players));\r\n\t\tdispatch(setLobbyPlace(places[randPlace]));\r\n\t\tprops.go(e)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet players_ = Array(count).fill({id: 1, name: \"Игрок\", role: \"homie\"})\r\n\t\tfor(let i = 0; i < players_.length; ++i) {\r\n\t\t\tplayers_[i] = {\r\n\t\t\t\tid: i + 1,\r\n\t\t\t\tname: `Игрок ${i + 1}`,\r\n\t\t\t\trole: \"homie\"\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetPlayers(players_)\r\n\t}, [])\r\n\r\n\treturn (\r\n\t<Panel id={props.id}>\r\n\t\t<PanelHeader\r\n\t\t\tleft={<PanelHeaderBack onClick={props.go} data-to=\"lobby-setting\"/>}\r\n\t\t>\r\n\t\t\tВведите имена\r\n\t\t</PanelHeader>\r\n\t\t{\r\n\t\t\tplayers.map((player) => (\r\n\t\t\t\t<FormItem key={player.id} top={`Игрок ${player.id}`}>\r\n\t\t\t\t\t<Input type=\"text\" value={player.name} onChange={e => handleChange(player.id, e)} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t))\r\n\t\t}\r\n\t  \t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t<Button stretched size=\"l\" mode=\"commerce\" onClick={e => onClickSubmit(e)} data-to=\"game\">\r\n\t\t\t\tЗапустить лобби\r\n\t\t\t</Button>\r\n\t  \t</Div>\r\n\t</Panel>\r\n)};\r\n\r\nLobby.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Lobby;\r\n","export const setLobbyPlayers = (players) => ({\r\n    type: \"SET_LOBBY_PLAYERS\",\r\n    payload: players,\r\n  });\r\n\r\nexport const setLobbyPlace = (place) => ({\r\n  type: \"SET_LOBBY_PLACE\",\r\n  payload: place,\r\n});\r\n\r\nexport const editLobbyPlayers = (players) => ({\r\n  type: \"EDIT_LOBBY_PLAYERS\",\r\n  payload: players,\r\n});\r\n\r\nexport const setLobbyPlayersCount = (count) => ({\r\n  type: \"SET_PLAYERS_COUNT\",\r\n  payload: count,\r\n});","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { setLobbyPlayersCount } from \"../redux/actions/lobby\"\r\nimport { setPlaces } from \"../redux/actions/places\"\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, PanelHeaderBack, FormItem, Input, Div, Button, Card, Group, Header } from '@vkontakte/vkui';\r\n\r\nconst LobbySetting = props => {\r\n\tconst [countPlayers, setCountPlayers] = useState(3)\r\n\tconst [customPlaces, setCustomPlaces] = useState([])\r\n\tconst [warning, setWarning] = useState(null)\r\n\r\n    const dispatch = useDispatch()\r\n\tconst { places } = useSelector(({ places }) => places);\r\n\r\n\tconst handleChangeCountPlayers = (e) => {\r\n\t\tsetCountPlayers(e.target.value)\r\n\t}\r\n\r\n    const handleChangePlaceLabel = (placeID, e) => {\r\n        let places_ = [...customPlaces];\r\n\t\tplaces_.map((place) => place.id == placeID ? place.label = e.target.value : '')\r\n\t\tsetCustomPlaces(places_)\r\n    }\r\n\r\n    const onClickRemovePlace = (placeID) => {\r\n        const places_ = [...customPlaces].filter((place) => place.id !== placeID)\r\n        setCustomPlaces(places_)\r\n    }\r\n\r\n    const onClickAddPlace = () => {\r\n        let places_ = [...customPlaces]\r\n\t\tconst newPlace = {\r\n\t\t\tid: customPlaces.length + 1,\r\n\t\t\tlabel: `Место ${customPlaces.length + 1}`,\r\n\t\t}\r\n\t\tplaces_.push(newPlace);\r\n\t\tsetCustomPlaces(places_)\r\n    }\r\n\r\n    const onClickSubmit = (e) => {\r\n\t\tif(countPlayers < 3) {\r\n\t\t\tsetWarning(\"В игре должно быть не менее 3 человек\")\r\n\t\t\treturn\r\n\t\t}\r\n        if(customPlaces.length < 2) {\r\n\t\t\tsetWarning(\"Укажите хотя бы 2 места, а то скучно как-то\")\r\n\t\t\treturn\r\n\t\t}\r\n        dispatch(setLobbyPlayersCount(countPlayers))\r\n        dispatch(setPlaces(customPlaces))\r\n\t\tprops.go(e)\r\n\t}\r\n\r\n    useEffect(() => {\r\n        setCustomPlaces(places)\r\n    }, [])\r\n\r\n    const cardStyle = {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: 48, alignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tbackground: \"#ff52527a\",\r\n    \tborder: \"2px solid #ff6161cf\"\r\n\t}\r\n\r\n    return (\r\n\t<Panel id={props.id}>\r\n\t\t<PanelHeader\r\n\t\t\tleft={<PanelHeaderBack onClick={props.go} data-to=\"home\"/>}\r\n\t\t>\r\n\t\t\tНастройка лобби\r\n\t\t</PanelHeader>\r\n        {warning &&\r\n\t\t\t<Div>\r\n\t\t\t\t<Card style={cardStyle}>\r\n\t\t\t\t\t<span>{warning}</span>\r\n\t\t\t\t</Card>\r\n\t\t\t</Div>\r\n\r\n\t\t}\r\n        <FormItem top=\"Количество игроков\">\r\n            <Input type=\"text\" value={countPlayers} onChange={handleChangeCountPlayers} />\r\n        </FormItem>\r\n        <Group header={\r\n            <Div style={{display: \"flex\", paddingLeft: 0, paddingTop: 0, paddingBottom: 0, justifyContent: \"space-between\"}}>\r\n                <Header>Места</Header>\r\n                <Button size='s' mode='primary' onClick={onClickAddPlace}>+</Button>\r\n            </Div>\r\n        }>\r\n            {\r\n            customPlaces.map((place) => (\r\n                <FormItem key={place.id} removable onRemove={() => onClickRemovePlace(place.id)}>\r\n                    <Input type=\"text\" value={place.label} onChange={e => handleChangePlaceLabel(place.id, e)} />\r\n                </FormItem>\r\n            ))\r\n            }\r\n        </Group>\r\n\t  \t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={onClickSubmit} data-to=\"lobby\">\r\n\t\t\t\tДалее\r\n\t\t\t</Button>\r\n\t  \t</Div>\r\n\t</Panel>\r\n)};\r\n\r\nLobbySetting.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default LobbySetting;\r\n","export const setPlaces = (places) => ({\r\n    type: \"SET_PLACES\",\r\n    payload: places,\r\n  });\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { Panel, PanelHeader, Header, Button, Group, Card, Div, CardGrid  } from '@vkontakte/vkui';\r\n\r\nconst Home = ({ id, go }) => {\r\n\tconst { places } = useSelector(({ places }) => places);\r\n\r\n\treturn (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader>Spy Game</PanelHeader>\r\n\r\n\t\t<Group header={<Header mode=\"secondary\">Локации</Header>}>\r\n\t\t\t<CardGrid size=\"m\">\r\n\t\t\t\t{places.map((place) =>\r\n\t\t\t\t<Card key={place.id}>\r\n\t\t\t\t\t<div style={{height: 96, display: \"flex\", alignItems: \"center\", textAlign: \"center\"}}>\r\n\t\t\t\t\t\t<span style={{ margin: \"0px auto\"}}> {place.label} </span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t\t)}\r\n\t\t\t</CardGrid>\r\n\t\t</Group>\r\n\r\n\t\t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={go} data-to=\"lobby-setting\">\r\n\t\t\t\tНастроить лобби\r\n\t\t\t</Button>\r\n\t\t</Div>\r\n\t</Panel>\r\n)};\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Home;\r\n\r\n","import bridge from '@vkontakte/vk-bridge';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, Title, Div, Button } from '@vkontakte/vkui';\r\nimport { Icon24ClockOutline } from '@vkontakte/icons';\r\n\r\nconst Game = props => {\r\n\tconst { players, history, place } = useSelector(({ lobby }) => lobby);\r\n\r\n\tlet flashlightInterval, timerInterval;\r\n\tconst [remaningTime, setRemaningTime] = useState(10000);\r\n\tconst [isCounting, setIsCounting] = useState(false);\r\n\r\n\tconst [gameMode, setGameMode] = useState(false);\r\n\tconst [showToggle, setShowToggle] = useState(false);\r\n\tconst [currentPlayer, setCurrentPlayer] = useState({pos: 0, player: players[0]});\r\n\r\n\tconst onClickChangePlayer = () => {\r\n\t\tconst nextPlayer = {\r\n\t\t\tpos: currentPlayer.pos + 1,\r\n\t\t\tplayer: players[currentPlayer.pos + 1]\r\n\t\t}\r\n\t\tsetShowToggle(false);\r\n\t\tsetCurrentPlayer(nextPlayer)\r\n\t}\r\n\r\n\tconst startGame = () => {\r\n\t\tstartTimer();\r\n\t\tsetGameMode(true)\r\n\t}\r\n\r\n\tconst startVote = (e) => {\r\n\t\tbridge.send('VKWebAppFlashSetLevel', {level: 0});\r\n\t\tclearInterval(flashlightInterval)\r\n\t\tprops.go(e);\r\n\t}\r\n\r\n\tconst startTimer = () => {\r\n\t\tsetIsCounting(true)\r\n\t}\r\n\r\n\tconst spyWin = (e) => {\r\n\t\tprops.go(e);\r\n\t\tclearInterval(flashlightInterval)\r\n\t\tclearInterval(timerInterval)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(players.length !== history.length) {\r\n\t\t\tstartGame()\r\n\t\t}\r\n\t\tsetRemaningTime(60 * players.length)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\ttimerInterval = setInterval(() => {\r\n\t\t\tconsole.log(\"ok\");\r\n\t\t\t\tisCounting &&\r\n\t\t\t\t\tsetRemaningTime(remaningTime - 1)\r\n\t\t\t},1000)\r\n\r\n\t\tif(remaningTime === 0) {\r\n\t\t\tclearInterval(timerInterval)\r\n\t\t\tflashlightInterval = setInterval(async () => {\r\n\t\t\t\t\tlet flashInfo = await bridge.send(\"VKWebAppFlashGetInfo\").then((data) => data);\r\n\t\t\t\t\tbridge.send('VKWebAppFlashSetLevel', {level: flashInfo?.level ? 0 : 1});\r\n\t\t\t}, 1000)\r\n\t\t}\r\n        return () => {clearInterval(timerInterval)};\r\n    },[isCounting, remaningTime]);\r\n\r\n\treturn (\r\n\t<Panel id={props.id}>\r\n\t\t<PanelHeader> {gameMode ? \"Обсуждение\" : \"Раздача ролей\"} </PanelHeader>\r\n\t\t{\r\n\t\t\tgameMode ?\r\n\t\t\t(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", marginTop: \"40px\"}}>\r\n\t\t\t\t\t\t<Icon24ClockOutline width={64} height={64} />\r\n\t\t\t\t\t\t<span style={{fontSize: \"96px\"}}>\r\n\t\t\t\t\t\t\t{ `${Math.floor(remaningTime / 60).toString().padStart(2, '0')} :\r\n\t\t\t\t\t\t\t  ${(remaningTime - Math.floor(remaningTime / 60) * 60).toString().padStart(2, '0')}`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Div>\r\n\t\t\t\t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\tremaningTime == 0 ?\r\n\t\t\t\t\t<Button stretched size=\"l\" mode=\"primary\" onClick={startVote} data-to=\"vote\">\r\n\t\t\t\t\t\tПерейти к голосованию\r\n\t\t\t\t\t</Button> :\r\n\t\t\t\t\t<Button stretched size=\"l\" mode=\"destructive\" onClick={spyWin} data-to=\"final\">\r\n\t\t\t\t\t\tШпион раскрыл место\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Div>\r\n\t\t\t</React.Fragment>\r\n\t\t\t) :\r\n\t\t\t(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Div style={{ marginTop: \"20px\" }} onClick={() => setShowToggle(true)}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundImage:\r\n\t\t\t\t\t\t\"linear-gradient(135deg, #FD8229 0%, #A73ED9 100%)\",\r\n\t\t\t\t\t\theight: \"70vh\",\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\tpaddingBottom: \"6px\",\r\n\t\t\t\t\t\tborderRadius: 12,\r\n\t\t\t\t\t\tgap: 10\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{showToggle ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Title level='1'>{currentPlayer.player.role == \"spy\" ? \"Шпион\" : \"Свой\"}</Title>\r\n\t\t\t\t\t\t\t<Title level='2'>{currentPlayer.player.role !== \"spy\" && place.label}</Title>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t):\r\n\t\t\t\t\t\t<Title level='2'>Нажми на меня и узнай роль</Title>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Div>\r\n\t\t\t\t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcurrentPlayer.pos == players.length - 1 ?\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Button stretched size=\"l\" mode=\"commerce\" onClick={() => startGame()}>\r\n\t\t\t\t\t\t\t\tНачать игру!\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t<Button stretched size=\"l\" mode=\"primary\" onClick={() => onClickChangePlayer()}>\r\n\t\t\t\t\t\t\tСледующий игрок\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Div>\r\n\t\t\t</React.Fragment>\r\n\t\t\t)\r\n\t\t}\r\n\t</Panel>\r\n)};\r\n\r\nGame.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Game;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { editLobbyPlayers } from \"../redux/actions/lobby\"\r\n\r\nimport { Panel, PanelHeader, Header, Button, Group, Card, Div, CardGrid  } from '@vkontakte/vkui';\r\n\r\nconst Vote = ({ id, go }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst { players } = useSelector(({ lobby }) => lobby);\r\n\tconst [warning, setWarning] = useState(false)\r\n\tconst [selectedPlayer, setSelectedPlayer] = useState(null)\r\n\r\n\tconst onClickSelectPlayer = (playerID) => {\r\n\t\tconst selPlayer = players.find((player) => player.id == playerID)\r\n\t\tsetSelectedPlayer(selPlayer)\r\n\t}\r\n\r\n\tconst endVote = (e) => {\r\n\t\tif(selectedPlayer == null) {\r\n\t\t\tsetWarning(true)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst players_ = players.filter((player) => player.id !== selectedPlayer.id)\r\n\t\tdispatch(editLobbyPlayers(players_))\r\n\r\n\t\tif(selectedPlayer.role == \"spy\" || players.length == 3) {\r\n\t\t\te.currentTarget.dataset.to = \"final\"\r\n\t\t\tgo(e)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tgo(e)\r\n\t}\r\n\r\n\tconst warningStyle = {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: 48, alignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tbackground: \"#ff52527a\",\r\n    \tborder: \"2px solid #ff6161cf\"\r\n\t}\r\n\r\n\treturn (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader>Голосование</PanelHeader>\r\n\t\t<Group header={<Header mode=\"primary\">Выберите игрока на выбывание</Header>}>\r\n\t\t\t<CardGrid size=\"m\">\r\n\t\t\t\t{players.map((player) =>\r\n\t\t\t\t<Card key={player.id} style={{background: selectedPlayer?.id == player.id && \"#8adb97\"}} onClick={() => onClickSelectPlayer(player.id)} >\r\n\t\t\t\t\t<div style={{height: 96, display: \"flex\", alignItems: \"center\", textAlign: \"center\"}}>\r\n\t\t\t\t\t\t<span style={{ margin: \"0px auto\"}}> { player.name } </span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t\t)}\r\n\t\t\t</CardGrid>\r\n\t\t</Group>\r\n\t\t{warning &&\r\n\t\t<Div>\r\n\t\t\t<Card style={warningStyle}>\r\n\t\t\t\t<span>Вы должны выбрать игрока на выбывание</span>\r\n\t\t\t</Card>\r\n\t\t</Div>\r\n\t\t}\r\n\r\n\t\t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={endVote} data-to=\"game\">\r\n\t\t\t\tЗакончить голосование\r\n\t\t\t</Button>\r\n\t\t</Div>\r\n\t</Panel>\r\n)};\r\n\r\nVote.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Vote;\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { Panel, PanelHeader, Header, Button, Group, Card, Div, CardGrid, Input, Title  } from '@vkontakte/vkui';\r\n\r\nconst Final = ({ id, go }) => {\r\n\tconst { history, players } = useSelector(({ lobby }) => lobby);\r\n\r\n\tconst [spyWin, setSpyWin] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst result = players.find((player) => player.role == \"spy\")\r\n\t\tif(result) {\r\n\t\t\tsetSpyWin(true)\r\n\t\t}\r\n\t\tlet a =\tplayers.map(player => player.id)\r\n\t\ta.in\r\n\t},[])\r\n\r\n\tconst winStyle = {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: 48, alignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tbackground: `${spyWin ? \"#ff52527a\" : \"#89e2778e\"}`,\r\n    \tborder: `2px solid ${spyWin ? \"#ff6161cf\" : \"#1a7a078e\"}`\r\n\t}\r\n\treturn (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader>Spy Game</PanelHeader>\r\n\r\n\t\t<Div>\r\n\t\t\t<Card style={winStyle}>\r\n\t\t\t\t<span>Шпион {spyWin ? \"выиграл\" : \"проиграл\"}</span>\r\n\t\t\t</Card>\r\n\t\t</Div>\r\n\t\t<Group header={<Header mode=\"secondary\">Игроки</Header>}>\r\n\t\t\t{\r\n\t\t\t\thistory.map((player) => (\r\n\t\t\t\t\t<Div key={player.id} style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\"}}>\r\n\t\t\t\t\t\t<Title level='3'>{`${player.name} (${player.role == \"spy\" ? \"Шпион\" : \"Свой\"})`}</Title>\r\n\t\t\t\t\t\t<Title level='3'>{`${players.map(player_ => player_.id).includes(player.id) ? \"Остался\" : \"Выбыл\"}`}</Title>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t</Group>\r\n\r\n\t\t<Div style={{marginTop: \"auto\"}}>\r\n\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={go} data-to=\"home\">\r\n\t\t\t\tВернуться в меню\r\n\t\t\t</Button>\r\n\t\t</Div>\r\n\t</Panel>\r\n)};\r\n\r\nFinal.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Final;\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot, ConfigProvider, SplitLayout, SplitCol } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport {Game, Home, Lobby, LobbySetting, Vote, Final} from './panels';\r\n\r\nconst App = () => {\r\n\tconst [scheme, setScheme] = useState('bright_light')\r\n\tconst [activePanel, setActivePanel] = useState('home');\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\r\n\r\n\tuseEffect(() => {\r\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tsetScheme(data.scheme)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tasync function fetchData() {\r\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\r\n\t\t\tsetUser(user);\r\n\t\t\tsetPopout(null);\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tconst go = e => {\r\n\t\tsetActivePanel(e.currentTarget.dataset.to);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ConfigProvider scheme={scheme}>\r\n\t\t\t<AdaptivityProvider>\r\n\t\t\t\t<AppRoot>\r\n\t\t\t\t\t<SplitLayout popout={popout}>\r\n\t\t\t\t\t\t<SplitCol>\r\n\t\t\t\t\t\t\t<View activePanel={activePanel}>\r\n\t\t\t\t\t\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} />\r\n\t\t\t\t\t\t\t\t<Lobby id='lobby' go={go} />\r\n\t\t\t\t\t\t\t\t<Game id='game' go={go} />\r\n\t\t\t\t\t\t\t\t<Vote id='vote' go={go} />\r\n\t\t\t\t\t\t\t\t<Final id='final' go={go} />\r\n\t\t\t\t\t\t\t\t<LobbySetting id='lobby-setting' go={go} />\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t</SplitCol>\r\n\t\t\t\t\t</SplitLayout>\r\n\t\t\t\t</AppRoot>\r\n\t\t\t</AdaptivityProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","const initialState = {\r\n  history: [],\r\n  players: [],\r\n  place: null,\r\n  count: 0,\r\n};\r\n\r\nconst players = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_LOBBY_PLAYERS\":\r\n      return {\r\n        ...state,\r\n        history: action.payload,\r\n        players: action.payload,\r\n        count: action.payload.length\r\n      };\r\n\r\n    case \"EDIT_LOBBY_PLAYERS\":\r\n      return {\r\n        ...state,\r\n        players: action.payload,\r\n        count: action.payload.length\r\n      };\r\n\r\n    case \"SET_PLAYERS_COUNT\":\r\n      return {\r\n        ...state,\r\n        count: Number(action.payload)\r\n      };\r\n\r\n    case \"SET_LOBBY_PLACE\":\r\n      return {\r\n        ...state,\r\n        place: action.payload\r\n      };\r\n\r\n      default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default players;\r\n","const initialState = {\r\n  places: [\r\n    {\r\n        id: 1,\r\n        label: \"Задний двор\",\r\n    },\r\n    {\r\n        id: 2,\r\n        label: \"Кладбище\",\r\n    },\r\n    {\r\n        id: 3,\r\n        label: \"Стадион\",\r\n    },\r\n    {\r\n        id: 4,\r\n        label: \"Бассейн\",\r\n    },\r\n    {\r\n        id: 5,\r\n        label: \"Кинотеатр\",\r\n    },\r\n    {\r\n        id: 6,\r\n        label: \"Спа-салон\",\r\n    },\r\n    {\r\n        id: 7,\r\n        label: \"Кампус ДВФУ\",\r\n    },\r\n    {\r\n        id: 8,\r\n        label: \"Дом компании «Зингер»\",\r\n    },\r\n  ],\r\n};\r\n\r\nconst places = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_PLACES\":\r\n      return {\r\n        ...state,\r\n        places: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default places;\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport lobbyReducer from \"./lobby\";\r\nimport placesReducer from \"./places\";\r\n\r\nconst rootReducer = combineReducers({\r\n  lobby: lobbyReducer,\r\n  places: placesReducer,\r\n});\r\n\r\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./redux/store\"\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}